<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API God of War - Personajes</title>
  <style>
    :root{
      --bg:#0f0f12;
      --card:#1b1b1f;
      --accent:#c33;
      --muted:#9aa0a6;
    }
    *{box-sizing:border-box}
    body { font-family: Arial, sans-serif; background:var(--bg); color:#fff; margin:0; padding:24px; }
    h1 { text-align:center; margin:0 0 18px 0; }
    #container{ max-width:1000px; margin:0 auto; display:flex; flex-direction:column; gap:10px }

    .card {
      background:var(--card);
      padding:12px;
      border-radius:12px;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:14px;
      box-shadow:0 6px 18px rgba(0,0,0,0.5);
      transition:transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease;
      border:1px solid rgba(255,255,255,0.02);
    }
    .card:hover{ transform:translateY(-4px); box-shadow:0 12px 30px rgba(0,0,0,0.6); background:#242428 }
    .thumb{ width:64px; height:64px; border-radius:8px; object-fit:cover; flex-shrink:0; }
    .meta{ display:flex; flex-direction:column }
    .name{ font-weight:700; color:var(--accent); font-size:1.05rem }
    .sub{ color:var(--muted); font-size:0.92rem }

    /* Modal */
    #modal {
      position:fixed; inset:0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,0.7); z-index:9999;
    }
    .modal-card{ background:var(--card); width:92%; max-width:720px; border-radius:12px; padding:18px; border:2px solid var(--accent); box-shadow:0 20px 60px rgba(0,0,0,0.7); }
    .modal-top{ display:flex; gap:16px; }
    .modal-img{ width:48%; max-width:300px; border-radius:8px; object-fit:cover }
    .modal-body{ flex:1 }
    .close-btn{ background:transparent; border:none; color:#fff; font-size:26px; cursor:pointer; float:right }
    @media (max-width:700px){ .modal-top{ flex-direction:column } .modal-img{ width:100% } }

    /* Search */
    .search-wrap{ display:flex; justify-content:center; margin:12px 0 18px 0 }
    #search{ width:320px; max-width:90%; padding:10px 12px; border-radius:10px; border:1px solid #333; background:#0b0b0d; color:#fff }
    footer{ text-align:center; color:var(--muted); margin-top:18px }
  </style>
</head>
<body>
  <h1>API Fan-Made: Personajes de God of War</h1>
  <div class="search-wrap"><input id="search" placeholder="Buscar por nombre, mitología..." /></div>
  <div id="container"></div>

  <!-- Modal -->
  <div id="modal" role="dialog" aria-modal="true">
    <div class="modal-card" id="modal-card">
      <button class="close-btn" id="closeBtn" aria-label="Cerrar">✖</button>
      <div class="modal-top">
        <img id="modal-img" class="modal-img" src="" alt="Imagen personaje" />
        <div class="modal-body">
          <h2 id="modal-name" style="margin-top:0;color:var(--accent)"></h2>
          <p id="modal-desc" style="color:var(--muted)"></p>
          <p id="modal-extra"></p>
        </div>
      </div>
    </div>
  </div>


  <script>
    (function(){
      // --- Datos de personajes (Griegos + Nórdicos esenciales) ---
      const personajes = [
        { nombre: "Kratos", imagen: "img/kratos.jpg", descripcion: "Nacido en Esparta, conocido como El Fantasma de Esparta. Fue un general espartano que, tras pactar con Ares, se convirtió en su siervo. Tras vengarse de los dioses griegos, sobrevivió y terminó en los reinos nórdicos, donde vive con su hijo Atreus.
          ", mitologia: "Griega"},
        { nombre: "Ares", imagen: "img/ares.jpg", descripcion: "Dios griego de la guerra, otorgó a Kratos las Espadas del Caos. Fue derrotado por Kratos en el primer God of War, lo que convirtió al protagonista en el nuevo Dios de la Guerra.", mitologia: "Griega" },
        { nombre: "Zeus", imagen: "img/zeus.jpg", descripcion: "Principal antagonista de la etapa griega. Temía que Kratos destruyera el Olimpo y lo enfrentó en varias ocasiones. Finalmente fue asesinado por Kratos en God of War III", mitologia: "Griega" },
        { nombre: "Atenea", imagen: "img/atenea.jpg", descripcion: "Diosa de la sabiduría y la guerra justa. Aliada de Kratos en los primeros juegos, lo ayudó a derrotar a Ares. Más tarde se convirtió en una figura ambigua, apareciendo incluso en forma astral tras su muerte.", mitologia: "Griega" },
        { nombre: "Hades", imagen: "img/hades.jpg", descripcion: "Dios del inframundo. Hermano de Zeus y Poseidón. Fue derrotado por Kratos en God of War III, quien arrancó su alma con las Garras de Hades.", mitologia: "Griega" },
        { nombre: "Poseidón", imagen: "img/poseidon.jpg", descripcion: "Dios de los mares y gobernante de Atlantis. Hermano de Zeus y Hades. En God of War III es uno de los primeros dioses que Kratos mata, arrancándole los ojos y rompiéndole el cuello.", mitologia: "Griega" },
        { nombre: "Atreus (Loki)", imagen: "img/atreus.jpg", descripcion: "- Hijo de Kratos y Faye. Revelado como Loki en la mitología nórdica. Es curioso, impulsivo y con gran potencial mágico. Su destino está ligado al Ragnarok y a los gigantes. ", mitologia: "Nórdica" },
        { nombre: "Baldur", imagen: "img/baldur.jpg", descripcion: "- Hijo de Odín y Freya. Dios de la luz, pero maldito con la invulnerabilidad que lo hace incapaz de sentir nada. Es el principal antagonista de God of War (2018). Kratos lo mata para salvar a Freya, rompiéndole el cuello. ", mitologia: "Nórdica" },
        { nombre: "Freya", imagen: "img/freya.jpg", descripcion: "- Diosa Vanir del amor, la magia y la guerra. Madre de Baldur y antigua reina de los Aesir. Ayuda a Kratos y Atreus en 2018, pero tras la muerte de Baldur jura venganza contra Kratos.", mitologia: "Nórdica" },
        { nombre: "Thor", imagen: "img/thor.jpg", descripcion: "- Dios del trueno, hijo de Odín. Conocido por su brutalidad y por matar a muchos gigantes. En God of War: Ragnarök se enfrenta directamente a Kratos como uno de los principales antagonistas.", mitologia: "Nórdica" },
        { nombre: "Odín", imagen: "img/odin.jpg", descripcion: "- El Padre de Todo, rey de Asgard. Maestro manipulador, obsesionado con el conocimiento y el control de los reinos. Principal antagonista de God of War: Ragnarök. Representa la culminación del conflicto de Kratos y Atreus contra los dioses nórdicos. ", mitologia: "Nórdica" }
      ];

      // URLs por defecto si la imagen local no existe o no carga
      const placeholder = "https://via.placeholder.com/400x400?text=God+of+War";

      const container = document.getElementById('container');
      const modal = document.getElementById('modal');
      const closeBtn = document.getElementById('closeBtn');
      const modalImg = document.getElementById('modal-img');
      const modalName = document.getElementById('modal-name');
      const modalDesc = document.getElementById('modal-desc');
      const modalExtra = document.getElementById('modal-extra');
      const search = document.getElementById('search');

      // Render tarjetas
      function render(list){
        container.innerHTML = '';
        list.forEach((p, idx) => {
          const card = document.createElement('div');
          card.className = 'card';

          // Escapar contenido para evitar problemas con comillas
          const safeName = String(p.nombre);
          const safeImg = String(p.imagen || '');
          const safeDescShort = String(p.descripcion || '');

          const imgEl = document.createElement('img');
          imgEl.className = 'thumb';
          imgEl.src = safeImg;
          imgEl.alt = safeName;
          // Si imagen no carga, usar placeholder
          imgEl.onerror = function(){ this.src = placeholder; };

          const meta = document.createElement('div');
          meta.className = 'meta';
          const nameEl = document.createElement('div');
          nameEl.className = 'name';
          nameEl.textContent = safeName;

          const subEl = document.createElement('div');
          subEl.className = 'sub';
          subEl.textContent = (p.mitologia ? p.mitologia + ' · ' : '') + (safeDescShort.slice(0,80) + (safeDescShort.length>80? '...':''));

          meta.appendChild(nameEl);
          meta.appendChild(subEl);

          card.appendChild(imgEl);
          card.appendChild(meta);

          // usar addEventListener (seguro) y pasar índice en dataset
          card.dataset.index = idx;
          card.addEventListener('click', function(){ openModal(parseInt(this.dataset.index,10)); });

          container.appendChild(card);
        });
      }

      function openModal(index){
        const p = personajes[index];
        if(!p) return;
        modalName.textContent = p.nombre;
        modalDesc.textContent = p.descripcion || '';
        modalExtra.textContent = (p.mitologia ? 'Mitología: ' + p.mitologia : '');
        // asignar imagen segura
        modalImg.src = p.imagen || placeholder;
        modalImg.onerror = function(){ this.src = placeholder; };
        modal.style.display = 'flex';
        // accessibility: focus close button
        closeBtn.focus();
      }

      function closeModal(){ modal.style.display = 'none'; }

      // Cerrar con botón y click fuera
      closeBtn.addEventListener('click', closeModal);
      modal.addEventListener('click', function(e){ if(e.target === modal) closeModal(); });
      window.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeModal(); });

      // Buscador
      search.addEventListener('input', function(){
        const q = this.value.trim().toLowerCase();
        if(!q) return render(personajes);
        const filtered = personajes.filter(p => {
          return (p.nombre && p.nombre.toLowerCase().includes(q)) || (p.mitologia && p.mitologia.toLowerCase().includes(q)) || (p.descripcion && p.descripcion.toLowerCase().includes(q));
        });
        render(filtered);
      });
      render(personajes);

      window.__GOW_DATA__ = { personajes, render, openModal };
    })();
  </script>
</body>
</html>


</html>


